<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>tech-docs | Technical documentation for ArchivesSpace</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="tech-docs" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Technical documentation for ArchivesSpace" />
<meta property="og:description" content="Technical documentation for ArchivesSpace" />
<meta property="og:site_name" content="tech-docs" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="tech-docs" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Technical documentation for ArchivesSpace","headline":"tech-docs","url":"/tech-docs/administration/upgrading/UPGRADING_1.1.1.html"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/tech-docs/assets/css/style.css?v=">
    <!--[if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
    <![endif]-->
    <!-- start custom head snippets, customize with your own _includes/head-custom.html file -->

<!-- Setup Google Analytics -->



<!-- You can set your favicon here -->
<!-- link rel="shortcut icon" type="image/x-icon" href="/tech-docs/favicon.ico" -->

<!-- end custom head snippets -->

  </head>
  <body>
    <div class="wrapper">
      <style>
  /* Styles via https://getbootstrap.com/docs/5.3/components/alerts/#icons */
  .deprecation-alert {
    display: flex;
    align-items: center;
    padding: 1rem;
    margin-bottom: 1.5rem;
    color: #58151c;
    background-color: #f8d7da;
    border: 1px solid #f1aeb5;
    border-radius: 0.375rem;
  }
  .deprecation-alert__svg {
    flex-shrink: 0 !important;
    width: 1em;
    height: 1em;
    margin-right: 0.5rem !important;
    fill: currentcolor;
  }
</style>

<aside class="deprecation-alert">
  <svg
    xmlns="http://www.w3.org/2000/svg"
    id="exclamation-triangle-fill"
    viewBox="0 0 16 16"
    class="deprecation-alert__svg"
    role="img"
    aria-label="Danger:"
  >
    <path
      d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"
    />
  </svg>

  <p style="margin-bottom: 0">
    <em style="margin-right: 0.25rem; font-weight: 700">NOTE!</em> We recently
    launched a
    <a href="https://docs.archivesspace.org"
      >new technical documentation site</a
    >
    as part of the ArchivesSpace v4.0.0 release.
    <br />
    For now both sites will be live, but we encourage you to take a look at the
    new site and leave feedback or suggestions.
  </p>
</aside>


      <header>
        <h1><a href="/tech-docs/">tech-docs</a></h1>

        

        <p>Technical documentation for ArchivesSpace</p>

        
        <p class="view"><a href="https://github.com/archivesspace/tech-docs">View the Project on GitHub <small>archivesspace/tech-docs</small></a></p>
        

        

        

        <p>
          <a
            href="https://github.com/archivesspace/tech-docs/edit/master/administration/upgrading/UPGRADING_1.1.1.md"
            title="Edit administration/upgrading/UPGRADING_1.1.1.md on GitHub"
          >
            Edit this page on GitHub
            <small>administration/upgrading/UPGRADING_1.1.1.md</small>
          </a>
        </p>

        <p>
          <a
            href="https://archivesspace.atlassian.net/jira/software/projects/TD/issues"
            title="Report issue with administration/upgrading/UPGRADING_1.1.1.md on Jira"
          >
            Report issue on Jira
            <small>administration/upgrading/UPGRADING_1.1.1.md</small>
          </a>
        </p>
      </header>
      <section>

      <h1 id="upgrading-to-111">UPGRADING TO 1.1.1</h1>

<p>Additional upgrade considerations specific to this release. Refer to the <a href="../upgrading.html">upgrade documentation</a> for the standard instructions that apply in all cases.</p>

<h2 id="resequencing-of-archival-object--digital-object-component-trees">Resequencing of Archival Object &amp; Digital Object Component trees</h2>
<hr />

<p>There have been some scenarios in which archival objects and digital object components lose
some of the information used to order their hierarchy. This can result in issues in creation,
editing, or moving items in the tree, since there are database contraints to ensure uniqueness
of certain metadata elements.</p>

<p>In order to ensure data integrity, there is now method to resequence the trees. This will
not reorder or edit the elements, but simply rebuild all the technical metadata used to establish
the ordering.</p>

<p>To run the resequencing process, edit the config/config.rb file to have this line:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AppConfig[:resequence_on_startup] = true
</code></pre></div></div>

<p>and restart ArchivesSpace. This will trigger a rebuilding process after the application has
started. It’s advised to let this rebuild process run its course prior to editing records.
This duration depends on the size of your database, which can take seconds ( for databases with
few Archival and Digital Objects ) to hours ( for databases with hundreds of thousands of records ).
Check your log file to see how the process is going. When it has finished, you should see the application
return to it normal operation, generally with only indexer updates being recorded in the log file.</p>

<p>After you’ve started ArchivesSpace, be sure to change the config.rb file to have the :resequence_on_startup
set to “false”, since you will not need to run this process on every restart.</p>

<h2 id="export-pdfs-in-the-public-interface">Export PDFs in the Public Interface</h2>
<hr />

<p>A common request has been to have PDF version of the EAD exported in the public application.
This has been a bit problematic, since EAD export has a rather large resource hit on the
database, which is only increased by the added process of PDF creation. We are currently
redesigning part of the ArchivesSpace backend to make PDF creation more user friendly by
establishing a queue system for exports.</p>

<p>In the meantime, Mark Cooper at Lyrasis has made a <a href="https://github.com/archivesspace-deprecated/aspace-public-formats"> Public Metadata Formats plugin </a><br />
that exposes certain metadata formats and PDFs in the public UI. This plugin has been included
in this release, but you will need to configure it to expose which formats you would like
to have exposed. Please read the plugin documentation on how to configure this.</p>

<p>PLEASE NOTE:
Exporting large EAD resources with this plugin will most likely cause some problems. Long requests
will timeout, since the server does not want to waste resources on long running processes.
In addition, large number of requests for PDFs can cause an increase load on the server.
Please be aware of the issues and limitations of this plugin before enabling it.</p>

<hr />


      </section>
      <footer>
        
        <p>This project is maintained by <a href="https://github.com/archivesspace">ArchivesSpace</a></p>
        
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="/tech-docs/assets/js/scale.fix.js"></script>
  </body>
</html>
